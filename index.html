<!-----

  
  
Project: Marketplace Starter (single-file preview)
Recommended folder structure (when splitting files):
/
  index.html
  /css
    styles.css
  /js
    app.js
  /data
    data.json
  /imgs
    logo.png
    profile.jpg
    1.webp 2.png ...

This single-file preview includes: header/navbar, responsive layout, RGB animated background, logo & profile, aside filters, products grid, simple cart (localStorage), and a P2P WebRTC starter placeholder.

  
  -----> 


  
<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Marketplace — Starter</title>
  <style>
    :root{
      --accent: 220 90% 56%; /* hsl as placeholder for rgb effects */
      --bg: #0f1724; --card:#0b1220; --muted:#94a3b8;
      --glass: rgba(255,255,255,0.04);
    }
    /* Reset-ish */
    *{box-sizing:border-box;margin:0;padding:0}
    html,body{height:100%}
    body{font-family:Inter,ui-sans-serif,system-ui,-apple-system,'Segoe UI',Roboto,'Helvetica Neue',Arial;color:#e6eef8;background:linear-gradient(180deg,#071029 0%, #081227 60%);}

    /* RGB animated header background */
    .rgb-bg{position:fixed;inset:0;z-index:-1;pointer-events:none;filter:blur(80px);opacity:.55}
    .rgb-circle{position:absolute;border-radius:50%;mix-blend-mode:screen;filter:blur(40px);}
    .rgb-circle.r{background:radial-gradient(circle at 20% 20%, rgba(255,0,80,0.95), rgba(255,0,80,0.0) 40%);} 
    .rgb-circle.g{background:radial-gradient(circle at 80% 40%, rgba(0,255,150,0.9), rgba(0,255,150,0) 40%);} 
    .rgb-circle.b{background:radial-gradient(circle at 50% 80%, rgba(60,120,255,0.9), rgba(60,120,255,0) 40%);} 

    /* Layout */
    .app{max-width:1200px;margin:36px auto;padding:18px}
    header{display:flex;align-items:center;gap:12px;justify-content:space-between}
    .brand{display:flex;align-items:center;gap:12px}
    .brand img{width:48px;height:48px;object-fit:cover;border-radius:10px}
    .brand h1{font-size:18px}

    nav{display:flex;gap:12px;align-items:center}
    nav a{color:var(--muted);text-decoration:none;padding:8px 10px;border-radius:8px}
    nav a:hover{background:var(--glass);color:#fff}

    .profile{display:flex;align-items:center;gap:8px}
    .profile img{width:40px;height:40px;border-radius:50%;object-fit:cover;border:2px solid rgba(255,255,255,0.06)}

    /* Main grid: aside + content */
    .main{display:grid;grid-template-columns:260px 1fr;gap:20px;margin-top:20px}
    aside{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));padding:16px;border-radius:12px;border:1px solid rgba(255,255,255,0.03)}
    .filters h3{font-size:14px;margin-bottom:8px;color:var(--muted)}
    .filters input[type=text]{width:100%;padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,0.03);background:transparent;color:inherit}
    .filters label{display:block;margin-top:12px;font-size:13px;color:var(--muted)}
    .filters .price{display:flex;gap:8px;align-items:center}

    /* Products grid */
    .products{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:14px}
    .card{background:linear-gradient(180deg, rgba(255,255,255,0.025), rgba(255,255,255,0.02));padding:12px;border-radius:12px;border:1px solid rgba(255,255,255,0.03);display:flex;flex-direction:column;gap:8px}
    .card img{width:100%;aspect-ratio:4/3;object-fit:cover;border-radius:8px}
    .row{display:flex;justify-content:space-between;align-items:center}
    .price{font-weight:700}
    .muted{color:var(--muted);font-size:13px}
    .btn{background:linear-gradient(90deg, hsl(var(--accent) / 0.95), hsl(calc(var(--accent) - 30) / 0.9));padding:8px 10px;border-radius:10px;color:#021;cursor:pointer;border:none}

    /* Cart floating */
    .cart-btn{position:fixed;right:18px;bottom:18px;background:rgba(255,255,255,0.05);backdrop-filter:blur(6px);padding:12px;border-radius:999px;border:1px solid rgba(255,255,255,0.04)}

    /* Responsive */
    @media (max-width:880px){.main{grid-template-columns:1fr}aside{order:2}}
  </style>
</head>
<body>
  <div class="rgb-bg" aria-hidden>
    <div class="rgb-circle r" style="width:420px;height:420px;left:-80px;top:-40px;"></div>
    <div class="rgb-circle g" style="width:520px;height:520px;right:-120px;top:-80px;"></div>
    <div class="rgb-circle b" style="width:600px;height:600px;left:30%;bottom:-200px;"></div>
  </div>

  <div class="app">
    <header>
      <div class="brand">
        <img src="imgs/logo.png" alt="logo" onerror="this.src='data:image/svg+xml;utf8,<svg xmlns=\'http://www.w3.org/2000/svg\' width=48 height=48><rect width=48 height=48 fill=%230b1220 rx=10/></svg>'">
        <div>
          <h1>Huachu Marketplace</h1>
          <div class="muted">Productos por la banda</div>
        </div>
      </div>

      <nav>
        <a href="#">Inicio</a>
        <a href="#">Tienda</a>
        <a href="#">Nosotros</a>
        <a href="#">Contacto</a>
      </nav>

      <div class="profile">
        <button id="rgbToggle" class="btn" title="Toggle RGB">RGB</button>
        <img src="imgs/profile.jpg" alt="perfil" onerror="this.src='https://via.placeholder.com/40'">
      </div>
    </header>

    <main class="main">
      <aside>
        <div class="filters">
          <h3>Buscar</h3>
          <input id="q" type="text" placeholder="Buscar producto...">

          <label>Categoría</label>
          <select id="cat" style="width:100%;padding:8px;border-radius:8px;background:transparent;border:1px solid rgba(255,255,255,0.03);color:inherit">
            <option value="">Todas</option>
            <option value="ropa">Ropa</option>
            <option value="accesorios">Accesorios</option>
            <option value="digital">Digital</option>
          </select>

          <label>Precio (max)</label>
          <div class="price">
            <input id="price" type="range" min="0" max="1000" value="1000" style="flex:1">
            <div id="priceVal" class="muted">$1000</div>
          </div>

          <label>Ordenar</label>
          <select id="sort" style="width:100%;padding:8px;border-radius:8px;background:transparent;border:1px solid rgba(255,255,255,0.03);color:inherit">
            <option value="new">Más nuevo</option>
            <option value="price-asc">Precio ↑</option>
            <option value="price-desc">Precio ↓</option>
          </select>

          <hr style="margin:12px 0;border:none;border-top:1px solid rgba(255,255,255,0.03)">

          <h3>P2P (prueba)</h3>
          <p class="muted" style="font-size:13px">Inicia una sesión P2P demo (WebRTC placeholder). Necesita HTTPS y permisos de cámara/mic.</p>
          <button id="startP2P" class="btn">Start P2P</button>
        </div>
      </aside>

      <section>
        <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px">
          <h2>Productos</h2>
          <div class="muted">Mostrando <span id="count">0</span></div>
        </div>

        <div id="products" class="products">
          <!-- cards injected here -->
        </div>
      </section>
    </main>

    <button class="cart-btn" id="openCart">Carrito (<span id="cartCount">0</span>)</button>
  </div>

  <script>
    // --- Simple App logic ---
    const el = id => document.getElementById(id);

    // Sample fallback data if data.json not available
    const SAMPLE = [
      {id:1,nombre:'Playera blanca',precio:199,categoria:'ropa',imagen:'imgs/1.webp'},
      {id:2,nombre:'Gorra negra',precio:149,categoria:'accesorios',imagen:'imgs/2.png'},
      {id:3,nombre:'Arte digital',precio:599,categoria:'digital',imagen:'imgs/3.png'},
      {id:4,nombre:'Sticker pack',precio:49,categoria:'accesorios',imagen:'imgs/4.png'}
    ];

    let PRODUCTS = [];
    let CART = JSON.parse(localStorage.getItem('cart')||'{}');

    function fetchProducts(){
      return fetch('data/data.json').then(r=>r.json()).catch(()=>fetch('data.json').then(r=>r.json()).catch(()=>SAMPLE));
    }

    function render(){
      const q = el('q').value.toLowerCase();
      const cat = el('cat').value;
      const maxPrice = Number(el('price').value);
      const sort = el('sort').value;

      let list = PRODUCTS.filter(p=>p.precio<=maxPrice && (!cat||p.categoria===cat) && (p.nombre.toLowerCase().includes(q) || (p.descripcion||'').toLowerCase().includes(q)));

      if(sort==='price-asc') list.sort((a,b)=>a.precio-b.precio);
      if(sort==='price-desc') list.sort((a,b)=>b.precio-a.precio);

      const cont = el('products'); cont.innerHTML='';
      list.forEach(p=>{
        const card = document.createElement('div'); card.className='card';
        card.innerHTML = `
          <img src="${p.imagen}" alt="${p.nombre}" onerror="this.src='https://via.placeholder.com/400x300'">
          <div style=\"display:flex;justify-content:space-between;align-items:center\"> 
            <div>
              <div style=\"font-weight:600\">${p.nombre}</div>
              <div class=\"muted\">${p.categoria}</div>
            </div>
            <div class=\"price\">$${p.precio}</div>
          </div>
          <div class=\"row\">
            <button class=\"btn\" onclick=\"addToCart(${p.id})\">Agregar</button>
            <button class=\"muted\" onclick=\"alert('Detalle: ${p.nombre} — demo')\">Ver</button>
          </div>
        `;
        cont.appendChild(card);
      });
      el('count').textContent = list.length;
      el('cartCount').textContent = Object.values(CART).reduce((s,n)=>s+n,0);
    }

    function addToCart(id){
      CART[id] = (CART[id]||0)+1;
      localStorage.setItem('cart', JSON.stringify(CART));
      el('cartCount').textContent = Object.values(CART).reduce((s,n)=>s+n,0);
    }

    // init
    (async()=>{
      PRODUCTS = await fetchProducts();
      // ensure numeric prices
      PRODUCTS = PRODUCTS.map(p=>({precio: Number(p.precio||0),categoria:p.categoria||'',...p}));
      render();
    })();

    // ui bindings
    ['q','cat','price','sort'].forEach(id=>el(id).addEventListener('input',() => { if(id==='price') el('priceVal').textContent = '$'+el('price').value; render(); }));

    el('rgbToggle').addEventListener('click', ()=>document.querySelector('.rgb-bg').style.display = document.querySelector('.rgb-bg').style.display === 'none' ? 'block' : 'none');

    // P2P placeholder: simple WebRTC starter
    el('startP2P').addEventListener('click', async ()=>{
      alert('P2P demo: esto es un placeholder. Para P2P real necesitas signaling server (WebSocket) y HTTPS).\nRevisa la consola para código WebRTC de ejemplo.');
      console.log('--- P2P starter: Get user media + create RTCPeerConnection ---');
      try{
        const stream = await navigator.mediaDevices.getUserMedia({audio:true,video:true});
        console.log('Got local stream', stream);
        // Show local preview in a popup window or element (not implemented here)
        // To actually connect P2P you need a signaling channel to exchange sdp/ice.
      }catch(e){console.error('Error P2P',e);}
    });

    el('openCart').addEventListener('click', ()=>{
      const items = Object.keys(CART).map(id=>{
        const p = PRODUCTS.find(x=>x.id==id) || {nombre:'Unknown',precio:0};
        return `${p.nombre} x ${CART[id]} — $${p.precio* CART[id]}`;
      });
      alert(items.length?items.join('\n'):'Carrito vacío');
    });
  </script>
</body>
</html>
